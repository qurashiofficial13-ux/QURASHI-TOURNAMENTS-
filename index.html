<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Free Fire Tournaments ‚Äî Free</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Free Fire free tournaments: host & register with no fees." />
  <style>
    :root{
      --bg:#f7f7fb; --card:#ffffff; --text:#111827; --muted:#6b7280;
      --brand:#ff6a00; --brand-2:#ff9500; --line:#e5e7eb; --ok:#16a34a; --bad:#ef4444;
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
    a{color:inherit}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    header{
      position:sticky;top:0;z-index:10;background:rgba(255,255,255,.8);
      backdrop-filter: blur(8px);border-bottom:1px solid var(--line)
    }
    .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800}
    .brand .logo{width:28px;height:28px;display:grid;place-items:center;border-radius:10px;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff}
    .btn{border:1px solid var(--line);background:#fff;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600}
    .btn.brand{background:linear-gradient(135deg,var(--brand),var(--brand-2));border:none;color:#fff}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .hero{background:linear-gradient(180deg,#fff, #fff 40%, #fff2e6);border-bottom:1px solid var(--line)}
    .hero-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:24px;padding:32px 0}
    .hero h1{font-size:clamp(26px,4vw,44px);line-height:1.1;margin:0}
    .hero p{color:var(--muted);margin:12px 0 0}
    .hero .cta{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
    .shot{height:320px;border-radius:24px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.08)}
    .shot img{width:100%;height:100%;object-fit:cover}
    /* toolbar */
    .tools{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .search{display:flex;align-items:center;gap:8px;border:1px solid var(--line);padding:8px 10px;border-radius:12px;background:#fff;min-width:280px}
    .search input{border:none;outline:none;width:100%;font:inherit;background:transparent}
    select{border:1px solid var(--line);border-radius:12px;padding:8px 10px;background:#fff}
    /* grid */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:900px){.hero-grid{grid-template-columns:1fr}.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:580px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);overflow:hidden;box-shadow:0 6px 16px rgba(0,0,0,.04)}
    .card .banner{height:160px;overflow:hidden}
    .card .banner img{width:100%;height:100%;object-fit:cover;transition:transform .25s}
    .card:hover .banner img{transform:scale(1.05)}
    .card .pad{padding:14px}
    .meta{display:flex;flex-wrap:wrap;gap:10px;color:var(--muted);font-size:14px}
    .chip{background:#fff;border:1px solid var(--line);padding:4px 10px;border-radius:999px;font-size:12px;font-weight:700}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .ok{color:var(--ok)} .bad{color:var(--bad)}
    /* sections */
    section{padding:26px 0}
    h2{font-size:22px;margin:0 0 12px}
    ul.rules{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    ul.rules li{background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px;font-size:14px}
    @media (max-width:700px){ul.rules{grid-template-columns:1fr}}
    table{width:100%;border-collapse:collapse;background:#fff;border:1px solid var(--line);border-radius:12px;overflow:hidden}
    th,td{padding:10px 12px;border-bottom:1px solid var(--line);font-size:14px;text-align:left}
    th{background:#fafafa}
    /* dialog (modal) */
    dialog{border:none;border-radius:16px;padding:0;width:min(520px,92vw);box-shadow:0 20px 60px rgba(0,0,0,.2)}
    .modal{padding:16px}
    .field{display:grid;gap:6px;margin:8px 0}
    .field input,.field textarea{border:1px solid var(--line);border-radius:12px;padding:10px;font:inherit}
    .footer{display:flex;justify-content:flex-end;gap:10px;margin-top:8px}
    footer{border-top:1px solid var(--line);background:#fff;color:var(--muted)}
    .muted{color:var(--muted);font-size:14px}
    .note{font-size:13px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo">üèÜ</div>
        <div>Free Fire Tournaments</div>
      </div>
      <div class="tools">
        <button class="btn" id="btnCreate">Host Event</button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-grid">
        <div>
          <h1>Host & Join <span style="color:var(--brand)">Free Fire</span> Tournaments ‚Äî 100% Free</h1>
          <p>Registration bilkul free. Squad banao, custom rooms, aur cash prizes jeeto.</p>
          <div class="cta">
            <a href="#list" class="btn brand">Browse Tournaments</a>
            <a href="#rules" class="btn">Read Rules</a>
          </div>
          <p class="note">Tip: niche ‚ÄúHost Event‚Äù se apna event add karo. Data localStorage me save hota hai.</p>
        </div>
        <div class="shot">
          <img alt="Gaming" src="https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1600&auto=format&fit=crop">
        </div>
      </div>
    </section>

    <section id="list">
      <div class="container">
        <div class="row" style="margin-bottom:12px;gap:12px;flex-wrap:wrap">
          <h2 style="margin:0">Upcoming Tournaments</h2>
          <div class="tools" style="margin-left:auto">
            <div class="search">
              <span>üîé</span>
              <input id="q" placeholder="Search name, mode, region..." />
            </div>
            <select id="mode">
              <option value="All">All</option>
              <option value="Solo">Solo</option>
              <option value="Duo">Duo</option>
              <option value="Squad">Squad</option>
            </select>
          </div>
        </div>
        <div id="grid" class="grid"></div>
        <p id="empty" class="muted" style="display:none;margin-top:10px">No tournaments found. Try another search.</p>
      </div>
    </section>

    <section id="rules">
      <div class="container">
        <h2>Rules & Fair Play</h2>
        <ul class="rules">
          <li>Mobile-only by default; emulator events alag se marked.</li>
          <li>Ping/connection player ki responsibility; rehost only server fail par.</li>
          <li>Team/usernames clean & appropriate.</li>
          <li>Best-of-3 unless match page says otherwise.</li>
          <li>Disputes proof ke sath submit‚Äîadmins final call.</li>
          <li>Room ID/Pass start se 15 min pehle milta hai.</li>
        </ul>
      </div>
    </section>

    <section id="leaderboard">
      <div class="container">
        <h2>Leaderboard (Sample)</h2>
        <div style="overflow:auto;border-radius:12px">
          <table>
            <thead><tr><th>Rank</th><th>Team</th><th>Points</th><th>Wins</th></tr></thead>
            <tbody id="lb">
              <!-- filled by JS -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="faq">
      <div class="container">
        <h2>FAQ</h2>
        <details class="card"><summary class="pad" style="cursor:pointer;font-weight:700">Registration free hai?</summary><div class="pad muted">Haan, bilkul free. Koi entry fee nahi.</div></details>
        <details class="card" style="margin-top:10px"><summary class="pad" style="cursor:pointer;font-weight:700">Prize kaise milega?</summary><div class="pad muted">JazzCash/EasyPaisa/UPI/PayPal ‚Äî region ke hisaab se.</div></details>
        <details class="card" style="margin-top:10px"><summary class="pad" style="cursor:pointer;font-weight:700">Custom room details?</summary><div class="pad muted">Room ID/Password tournament start se 15 min pehle diye jayenge.</div></details>
      </div>
    </section>
  </main>

  <footer>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;padding:16px 0;">
      <div>¬© <span id="year"></span> Free Fire ‚Äî Community</div>
      <button class="btn" id="reset">Reset Local Data</button>
    </div>
  </footer>

  <!-- Register Modal -->
  <dialog id="regDialog">
    <form method="dialog" id="regForm">
      <div class="modal">
        <div class="row" style="margin-bottom:8px">
          <h3 style="margin:0">Register ‚Äî <span id="regTitle"></span></h3>
          <button class="btn" value="close" formnovalidate>‚úñ</button>
        </div>
        <div class="field">
          <label>Team / Player Name *</label>
          <input required id="fTeam" placeholder="e.g., Karachi Kings" />
        </div>
        <div class="row" style="gap:10px">
          <div class="field" style="flex:1">
            <label>Captain *</label>
            <input required id="fCaptain" placeholder="Your name" />
          </div>
          <div class="field" style="flex:1">
            <label>Phone (WhatsApp) *</label>
            <input required id="fPhone" placeholder="03xx-xxxxxxx" />
          </div>
        </div>
        <div class="field">
          <label>Email (optional)</label>
          <input id="fEmail" placeholder="you@email.com" />
        </div>
        <div class="field">
          <label>Free Fire Player IDs (comma separated)</label>
          <input id="fIds" placeholder="12345, 67890, ..." />
        </div>
        <div class="footer">
          <button class="btn" value="close" formnovalidate>Cancel</button>
          <button class="btn brand" id="submitReg" value="submit">Submit</button>
        </div>
        <p class="note">Note: data localStorage me safe hota hai (sirf isi device/browser).</p>
      </div>
    </form>
  </dialog>

  <!-- Create Tournament Modal -->
  <dialog id="createDialog">
    <form id="createForm" method="dialog">
      <div class="modal">
        <div class="row" style="margin-bottom:8px">
          <h3 style="margin:0">Create Tournament</h3>
          <button class="btn" value="close" formnovalidate>‚úñ</button>
        </div>
        <div class="field">
          <label>Title *</label>
          <input name="title" required placeholder="Weekend Squad Cup" />
        </div>
        <div class="row" style="gap:10px">
          <div class="field" style="flex:1">
            <label>Mode *</label>
            <select name="mode">
              <option>Solo</option>
              <option>Duo</option>
              <option>Squad</option>
            </select>
          </div>
          <div class="field" style="flex:1">
            <label>Prize Pool (PKR)</label>
            <input type="number" name="prize" value="3000" />
          </div>
        </div>
        <div class="row" style="gap:10px">
          <div class="field" style="flex:1">
            <label>Date *</label>
            <input type="date" name="date" required />
          </div>
          <div class="field" style="flex:1">
            <label>Time (PKT) *</label>
            <input type="time" name="time" required />
          </div>
        </div>
        <div class="row" style="gap:10px">
          <div class="field" style="flex:1">
            <label>Max Teams/Players *</label>
            <input type="number" name="max" value="32" required />
          </div>
          <div class="field" style="flex:1">
            <label>Region</label>
            <input name="region" placeholder="Pakistan, India, Global" />
          </div>
        </div>
        <div class="field">
          <label>Banner Image URL (optional)</label>
          <input name="banner" placeholder="https://..." />
        </div>
        <div class="footer">
          <button class="btn" value="close" formnovalidate>Cancel</button>
          <button class="btn brand" value="submit">Save</button>
        </div>
      </div>
    </form>
  </dialog>

  <script>
    // ---------- Storage helpers ----------
    const S_TOURNEYS = "ff.tournaments.v1";
    const S_REGS = "ff.registrations.v1";

    const seeds = [
      {
        id: "ff-001",
        title: "Solo Blitz Cup",
        mode: "Solo",
        date: "2025-09-10",
        time: "20:00",
        prizePool: 5000,
        maxTeams: 64,
        registered: 28,
        platform: "Garena Free Fire (OB43)",
        region: "South Asia",
        banner: "https://images.unsplash.com/photo-1542751110-97427bbecf20?q=80&w=1600&auto=format&fit=crop",
      },
      {
        id: "ff-002",
        title: "Duo Rush Showdown",
        mode: "Duo",
        date: "2025-09-15",
        time: "21:00",
        prizePool: 8000,
        maxTeams: 48,
        registered: 36,
        platform: "Garena Free Fire (OB43)",
        region: "Open ‚Äì Global",
        banner: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=1600&auto=format&fit=crop",
      },
      {
        id: "ff-003",
        title: "Squad Masters League",
        mode: "Squad",
        date: "2025-09-25",
        time: "19:30",
        prizePool: 15000,
        maxTeams: 32,
        registered: 12,
        platform: "Garena Free Fire (OB43)",
        region: "Pakistan + India",
        banner: "https://images.unsplash.com/photo-1553481187-be93c21490a9?q=80&w=1600&auto=format&fit=crop",
      },
    ];

    const $ = sel => document.querySelector(sel);
    const grid = $("#grid");
    const empty = $("#empty");
    const q = $("#q");
    const mode = $("#mode");
    const year = $("#year");
    year.textContent = new Date().getFullYear();

    // Leaderboard (sample)
    const lbData = [
      { team: "A1 Warriors", points: 78, wins: 3 },
      { team: "NoCap Duo", points: 64, wins: 2 },
      { team: "Karachi Kings", points: 59, wins: 1 },
      { team: "Delhi Demons", points: 48, wins: 1 },
      { team: "Lahore Legends", points: 41, wins: 0 },
    ];
    const lb = $("#lb");
    lb.innerHTML = lbData.map((r,i)=>`<tr><td>${i+1}</td><td>${r.team}</td><td>${r.points}</td><td>${r.wins}</td></tr>`).join("");

    // ---------- State ----------
    let tournaments = JSON.parse(localStorage.getItem(S_TOURNEYS) || "null") || seeds;
    let registrations = JSON.parse(localStorage.getItem(S_REGS) || "[]");

    function saveState(){
      localStorage.setItem(S_TOURNEYS, JSON.stringify(tournaments));
      localStorage.setItem(S_REGS, JSON.stringify(registrations));
    }

    // ---------- Rendering ----------
    function spotsLeft(t){ return t.maxTeams - t.registered; }

    function cardHTML(t){
      const left = spotsLeft(t);
      const leftCls = left>0 ? "ok" : "bad";
      const leftText = left>0 ? `${left} spots left` : "Full";
      return `
        <article class="card">
          <div class="banner"><img alt="${t.title}" src="${t.banner}"></div>
          <div class="pad">
            <div class="row" style="margin-bottom:4px">
              <h3 style="margin:0;font-size:18px">${t.title}</h3>
              <span class="chip">${t.mode}</span>
            </div>
            <div class="meta">
              <div>üìÖ ${t.date} ‚Ä¢ ${t.time}</div>
              <div>üèÜ PKR ${Number(t.prizePool||0).toLocaleString()}</div>
              <div>üë• ${t.registered}/${t.maxTeams}</div>
            </div>
            <div class="muted" style="margin-top:6px">${t.platform || "Free Fire"} ‚Ä¢ ${t.region || "Open"}</div>
            <div class="row" style="margin-top:10px">
              <span class="${leftCls}" style="font-weight:700;font-size:13px">${leftText}</span>
              <button class="btn brand" ${left<=0?"disabled":""} onclick="openRegister('${t.id}')">Register</button>
            </div>
          </div>
        </article>
      `;
    }

    function render(){
      const txt = (q.value || "").trim().toLowerCase();
      const m = mode.value;
      const list = tournaments.filter(t=>{
        const inQ = !txt || t.title.toLowerCase().includes(txt) || t.mode.toLowerCase().includes(txt) || (t.region||"").toLowerCase().includes(txt);
        const inM = m === "All" || t.mode.toLowerCase().includes(m.toLowerCase());
        return inQ && inM;
      });
      grid.innerHTML = list.map(cardHTML).join("");
      empty.style.display = list.length? "none":"block";
    }

    q.addEventListener("input", render);
    mode.addEventListener("change", render);

    // ---------- Register flow ----------
    const regDialog = document.getElementById("regDialog");
    const regTitle = document.getElementById("regTitle");
    const fTeam = document.getElementById("fTeam");
    const fCaptain = document.getElementById("fCaptain");
    const fPhone = document.getElementById("fPhone");
    const fEmail = document.getElementById("fEmail");
    const fIds = document.getElementById("fIds");
    const submitReg = document.getElementById("submitReg");
    let regTournamentId = null;

    window.openRegister = function(id){
      const t = tournaments.find(x=>x.id===id);
      if(!t) return;
      regTournamentId = id;
      regTitle.textContent = t.title;
      fTeam.value = fCaptain.value = fPhone.value = fEmail.value = fIds.value = "";
      regDialog.showModal();
    }

    submitReg.addEventListener("click", (e)=>{
      // prevent dialog default submit close if invalid
      if(!fTeam.value.trim() || !fCaptain.value.trim() || !fPhone.value.trim()){
        e.preventDefault();
        alert("Please fill required fields.");
        return;
      }
      const tIndex = tournaments.findIndex(x=>x.id===regTournamentId);
      if(tIndex===-1){ alert("Tournament not found"); return; }
      const t = tournaments[tIndex];
      if(spotsLeft(t)<=0){ e.preventDefault(); alert("Tournament is full."); return; }
      const payload = {
        tournamentId: regTournamentId,
        teamName: fTeam.value.trim(),
        captain: fCaptain.value.trim(),
        phone: fPhone.value.trim(),
        email: fEmail.value.trim(),
        playerIds: fIds.value.trim(),
        createdAt: new Date().toISOString()
      };
      registrations.push(payload);
      tournaments[tIndex].registered = Math.min(t.maxTeams, t.registered + 1);
      saveState();
      render();
      // allow dialog to close normally
      setTimeout(()=>alert("Registration received! We will contact you on WhatsApp/Email."), 0);
    });

    // ---------- Create Tournament ----------
    const btnCreate = document.getElementById("btnCreate");
    const createDialog = document.getElementById("createDialog");
    const createForm = document.getElementById("createForm");

    btnCreate.addEventListener("click", ()=>createDialog.showModal());

    createForm.addEventListener("submit", (e)=>{
      const fd = new FormData(createForm);
      const t = {
        id: crypto.randomUUID(),
        title: (fd.get("title")||"").toString(),
        mode: (fd.get("mode")||"Squad").toString(),
        date: (fd.get("date")||"").toString(),
        time: (fd.get("time")||"").toString(),
        prizePool: Number(fd.get("prize")||0),
        maxTeams: Number(fd.get("max")||0),
        registered: 0,
        platform: "Garena Free Fire",
        region: (fd.get("region")||"Open").toString(),
        banner: (fd.get("banner")||"https://images.unsplash.com/photo-1553481187-be93c21490a9?q=80&w=1600&auto=format&fit=crop").toString(),
      };
      tournaments = [t, ...tournaments];
      saveState();
      render();
      // let dialog close
    });

    // ---------- Footer tools ----------
    document.getElementById("reset").addEventListener("click", ()=>{
      if(confirm("Clear saved tournaments & registrations?")){
        localStorage.removeItem(S_TOURNEYS);
        localStorage.removeItem(S_REGS);
        tournaments = seeds.slice();
        registrations = [];
        render();
        alert("Local data cleared.");
      }
    });

    // ---------- First paint ----------
    render();
  </script>
</body>
</html>
